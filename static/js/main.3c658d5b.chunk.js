(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{15:function(e,t,n){e.exports={root:"PlayField_root__1NBq1",top:"PlayField_top__15tpd",buttonChangeRound:"PlayField_buttonChangeRound__230Fu",round:"PlayField_round__1KHUt",activationTokens:"PlayField_activationTokens__3nNgI",statistics:"PlayField_statistics__3Y9a7",gloryPointsControls:"PlayField_gloryPointsControls__3d-w8",gloryPoints:"PlayField_gloryPoints__1g3p2",gloryPoint:"PlayField_gloryPoint__3anpN",bottom:"PlayField_bottom__39J6I",buttonEndGame:"PlayField_buttonEndGame__1GtlX"}},25:function(e,t,n){e.exports={root:"FighterItem_root__3fYUL",focused:"FighterItem_focused__1fytl",imageContainer:"FighterItem_imageContainer__2Ytdc",dead:"FighterItem_dead__1VLcB",imageIsDead:"FighterItem_imageIsDead__2J0jY",imageFighter:"FighterItem_imageFighter__w_NNR"}},30:function(e,t,n){e.exports={root:"Menu_root__15shr",title:"Menu_title__1VVIM",items:"Menu_items__3by7Z",item:"Menu_item__1zdMC"}},31:function(e,t,n){e.exports={root:"Button_root__2-QVb",primary:"Button_primary__FZqYg",secondary:"Button_secondary__1_JU8",third:"Button_third__3rmlg",disabled:"Button_disabled__3vE9A"}},32:function(e,t,n){e.exports={root:"ChooseSquad_root__zMTP1",title:"ChooseSquad_title__2vmE6",paper:"ChooseSquad_paper__1YGzK",items:"ChooseSquad_items__5WYYr",bottom:"ChooseSquad_bottom__1ijla"}},33:function(e,t,n){e.exports={root:"GameEnd_root__2h6Qj",title:"GameEnd_title__unVR0",statistics:"GameEnd_statistics__3iA8j",bottom:"GameEnd_bottom__PtfK7",buttonAccept:"GameEnd_buttonAccept__wDaSZ"}},38:function(e,t,n){e.exports={root:"InGameTabs_root__3tNls",button:"InGameTabs_button__1jr08"}},44:function(e,t,n){e.exports={root:"SquadItem_root__1GrLk",focused:"SquadItem_focused__1dRd7",imageContainer:"SquadItem_imageContainer__34L9E",name:"SquadItem_name__3vZRU"}},52:function(e,t,n){e.exports={root:"Icons_root__8nskU",tiny:"Icons_tiny__2YyJc"}},53:function(e,t,n){e.exports={content:"App_content__2cDQP"}},58:function(e,t,n){e.exports={root:"ActivationToken_root__18aDM"}},59:function(e,t,n){e.exports={root:"InnerBorderRadiusWrapper_root__zTUsN"}},60:function(e,t,n){e.exports={root:"Scroll_root__2WouV"}},8:function(e,t,n){e.exports={root:"Cards_root__3RkX3",top:"Cards_top__3kvPN",characters:"Cards_characters__2jjA-",characterName:"Cards_characterName__1fnBW",middle:"Cards_middle__aBXFe",card:"Cards_card__2X5jI",left:"Cards_left__1vuLh",right:"Cards_right__1rR5w",cardContainer:"Cards_cardContainer__35eFG",actions:"Cards_actions__2fDA8",healthPoints:"Cards_healthPoints__3gxwV",bottom:"Cards_bottom__tFEIU",cardFullScreenContainer:"Cards_cardFullScreenContainer__2Fmmf",cardFullScreenImageContainer:"Cards_cardFullScreenImageContainer__2vNYv",cardFullScreenTitle:"Cards_cardFullScreenTitle__3G8FE",cardFullScreenDescription:"Cards_cardFullScreenDescription__1bqgV"}},80:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),i=n(39),s=n.n(i),o=n(53),d=n.n(o),l=n(30),u=n(4),j=n(18),b=n(14),_=n(31),O=n.n(_),m=n(13),h=n.n(m),f=function(e){var t,n=e.className,a=e.theme,r=void 0===a?"primary":a,i=Object(b.a)(e,["className","theme"]);return"primary"===r?t=O.a.primary:"secondary"===r?t=O.a.secondary:"third"===r&&(t=O.a.third),Object(c.jsx)("button",Object(u.a)({className:h()(O.a.root,t,n,Object(j.a)({},O.a.disabled,i.disabled))},i))},p=n(11),v=n(84),x=n(9),E={language:"ru"},g=function(e){return{type:"SETTINGS-REDUCER/SET-LANGUAGE",language:e}},N=function(){var e=Object(v.a)().t,t=Object(x.b)(),n=Object(x.c)((function(e){return e.settings})).language;return Object(c.jsxs)("div",{className:l.root,children:[Object(c.jsx)(f,{theme:"secondary",onClick:function(){t(g("ru"===n?"en":"ru"))},children:n}),Object(c.jsxs)("div",{className:l.items,children:[Object(c.jsx)("div",{className:l.title,children:e("welcome")}),Object(c.jsx)(p.b,{to:pe.CHOOSE_SQUAD.path,className:l.item,children:Object(c.jsx)(f,{children:e("startGame")})}),Object(c.jsx)(p.b,{to:pe.PLAY_FIELD.path,className:l.item,children:Object(c.jsx)(f,{children:e("continue")})})]})]})},C=n(29),A=n(32),D=n.n(A),R=n(44),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return e.isActive}))},S=function(e){return e.filter((function(e){return!!e.healthPoints}))},P=function(e){return"/warhamer-underworlds"+e},T=function(e){return P("/images/icons/".concat(e,".png"))},I=function(e){return P("/images/fighters/".concat(e,".png"))},k=function(e){return P("/images/war-bands/".concat(e,".png"))},G=function(e,t){return P("/images/cards/".concat(t,"/").concat(e,".jpg"))},U=function(e){var t=e.name,n=e.color,a=e.icon,r=e.className,i=void 0===r?"":r,s=e.isFocused,o=Object(b.a)(e,["name","color","icon","className","isFocused"]);return Object(c.jsx)("div",Object(u.a)(Object(u.a)({className:m(R.root,i,Object(j.a)({},R.focused,s))},o),{},{children:Object(c.jsx)("div",{style:{backgroundColor:n},className:R.imageContainer,children:Object(c.jsx)("img",{src:k(a),alt:t})})}))},F=n(23),M={currentRound:0,currentWarBand:0,rounds:[],isGameCanBeSaved:!1},w=function(e){return{type:"GAME-REDUCER/SET-rounds",rounds:e}},B=function(e,t,n){return{type:"GAME-REDUCER/UPDATE-CARD",data:{roundIndex:e,index:t,newPropertyValues:n}}},L=function(e,t,n){return{type:"GAME-REDUCER/UPDATE-ACTIVATION-TOKEN",data:{roundIndex:e,index:t,newPropertyValues:n}}},W=function(e){return{type:"GAME-REDUCER/SET-CURRENT-ROUND",payload:e}},V=function(e){return{type:"GAME-REDUCER/SET-CURRENT-WAR-BAND",payload:e}},Y=function(e,t){return{type:"GAME-REDUCER/SET-GLORY-POINTS",data:{roundIndex:e,newPropertyValues:t}}},q=function(e){return{type:"GAME-REDUCER/LOAD-GAME-SUCCESS",data:e}},H="move",z="attack",J="defend",K="dodge",X=function(){var e=Object(x.b)(),t=Object(v.a)().t,n=Object(v.a)("warBands").t,r=Object(a.useState)(0),i=Object(C.a)(r,2),s=i[0],o=i[1],d=n("items",{returnObjects:!0}).map((function(t,n){var a=t.name,r=t.icon,i=t.color;return Object(c.jsx)(U,{name:a,icon:r,color:i,isFocused:s===n,onClick:function(){o(n),e(V(n))}},"war-band-".concat(n))}));return Object(c.jsxs)("div",{className:D.a.root,children:[Object(c.jsx)("div",{className:D.a.title,children:t("chooseSquad")}),Object(c.jsxs)("div",{className:D.a.paper,children:[Object(c.jsx)("div",{className:D.a.items,children:d}),Object(c.jsx)("div",{className:D.a.bottom,children:Object(c.jsx)(p.b,{to:pe.PLAY_FIELD.path,children:Object(c.jsx)(f,{onClick:function(){},children:t("acceptChoose")})})})]})]})},Q=n(7),Z=n(33),$=function(){var e=Object(v.a)().t,t=Object(x.c)((function(e){return e.game})).rounds,n=t.reduce((function(e,t){return e+function(e){return e.length-S(e).length}(t.cards)}),0),a=t.reduce((function(e,t){return e+t.gloryPoints.wasted.count}),0),r=t.reduce((function(e,t){return e+t.gloryPoints.notWasted.count}),0);return Object(c.jsxs)("div",{className:Z.root,children:[Object(c.jsx)("div",{className:Z.title,children:e("gameEnd")}),Object(c.jsx)("div",{className:Z.statistics,children:Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("gloryPointTokens")}),Object(c.jsx)("td",{children:r})]})}),Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("notWasted")}),Object(c.jsx)("td",{children:r})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("wasted")}),Object(c.jsx)("td",{children:a})]})]}),Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("fightersInTheSquad")}),Object(c.jsx)("td",{children:r})]})}),Object(c.jsx)("tbody",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("casualties")}),Object(c.jsx)("td",{children:n})]})})]})}),Object(c.jsx)("div",{className:Z.bottom,children:Object(c.jsx)(p.b,{to:pe.MAIN.path,children:Object(c.jsx)(f,{className:Z.buttonAccept,children:e("accept")})})})]})},ee=n(15),te=n(38),ne=n(52),ce=n.n(ne),ae=function(e){var t=e.size,n=e.srcDisabled,a=e.srcHover,r=e.srcDefault,i=e.className,s=Object(b.a)(e,["size","srcDisabled","srcHover","srcDefault","className"]),o="";return"tiny"===t&&(o=ce.a.tiny),Object(c.jsx)("button",Object(u.a)({className:h()(ce.a.root,i,o),style:{"--src-disabled":'url("'.concat(T(n||r),'")'),"--src-hover":'url("'.concat(T(a||r),'")'),"--src-default":'url("'.concat(T(r),'")')}},s))},re=function(){var e=Object(Q.f)().pathname;return Object(c.jsxs)("div",{className:te.root,children:[Object(c.jsx)(p.c,{to:pe.CARDS.path,children:Object(c.jsx)(ae,{className:te.button,srcDefault:"ic_menu_selected_hero",srcHover:"ic_menu_selected_hero_active",srcDisabled:"ic_menu_selected_hero_active",disabled:e===pe.CARDS.path})}),Object(c.jsx)(p.c,{to:pe.PLAY_FIELD.path,children:Object(c.jsx)(ae,{className:te.button,srcDefault:"ic_menu_game_score",srcHover:"ic_menu_game_score_active",srcDisabled:"ic_menu_game_score_active",disabled:e===pe.PLAY_FIELD.path})}),Object(c.jsx)(p.c,{exact:!0,to:pe.MAIN.path,children:Object(c.jsx)(ae,{className:te.button,srcDefault:"ic_menu_save_and_exit",disabled:e===pe.MAIN.path})})]})},ie=n(58),se=function(e){var t,n,a=e.className,r=void 0===a?"":a,i=e.isActive,s=void 0!==i&&i,o=Object(b.a)(e,["className","isActive"]);return s?(t=T("ic_activation_token"),n="Activation token active"):(t=T("ic_activation_token_spent"),n="Activation token spent"),Object(c.jsx)("div",Object(u.a)(Object(u.a)({className:m(ie.root,r)},o),{},{children:Object(c.jsx)("img",{src:t,alt:n})}))},oe=n(59),de=function(e){var t=e.className,n=e.children,a=Object(b.a)(e,["className","children"]);return Object(c.jsx)("div",Object(u.a)(Object(u.a)({className:m(oe.root,t)},a),{},{children:n}))},le=function(){var e=Object(x.b)(),t=Object(v.a)().t,n=Object(x.c)((function(e){return e.game})).rounds,a=Object(x.c)((function(e){return e.game})).currentRound,r=n[a],i=n.length,s=null===r||void 0===r?void 0:r.activationTokens,o=a<i-1,d=a>0,l=n.reduce((function(e,t){return e+t.gloryPoints.wasted.count}),0),u=n.reduce((function(e,t){return e+t.gloryPoints.notWasted.count}),0),j=function(){e(Y(a,{notWasted:{count:u+1}}))},b=function(){e(Y(a,{notWasted:{count:u-1}}))},_=function(){l&&(e(Y(a,{wasted:{count:l-1}})),j())},O=function(){u&&(b(),e(Y(a,{wasted:{count:l+1}})))},m=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?j():b()},h=function(t){t?o&&e(W(a+1)):d&&e(W(a-1))},E=null===s||void 0===s?void 0:s.map((function(t,n){var r=t.isActive;return Object(c.jsx)(se,{onClick:function(){e(L(a,n,{isActive:!r}))},isActive:r},n)}));return Object(c.jsxs)("div",{className:ee.root,children:[Object(c.jsxs)("div",{className:ee.top,children:[Object(c.jsx)(ae,{className:ee.buttonChangeRound,srcDefault:"ic_previous_round",srcHover:"ic_previous_round_pressed",srcDisabled:"ic_previous_round_inactive",disabled:!d,onClick:function(){return h(!1)}}),Object(c.jsx)(de,{className:ee.round,children:Object(c.jsxs)("span",{children:[t("round")," ",a+1]})}),Object(c.jsx)(ae,{className:ee.buttonChangeRound,srcDefault:"ic_next_round",srcHover:"ic_next_round_pressed",srcDisabled:"ic_next_round_inactive",disabled:!o,onClick:function(){return h(!0)}})]}),Object(c.jsx)("div",{className:ee.activationTokens,children:E}),Object(c.jsxs)("div",{className:ee.statistics,children:[Object(c.jsxs)("div",{className:ee.gloryPointsControls,children:[Object(c.jsx)(f,{theme:"secondary",onClick:function(){m(!0)},children:"+"}),Object(c.jsx)(f,{theme:"secondary",disabled:!u,onClick:function(){m(!1)},children:"-"})]}),Object(c.jsxs)("div",{className:ee.gloryPoints,children:[Object(c.jsxs)(f,{disabled:!u,className:ee.gloryPoint,onClick:function(){O()},children:[Object(c.jsx)("img",{src:T("ic_glory_point"),alt:"".concat(t("gloryPointTokens"),' {t("wasted")}')}),u]}),Object(c.jsxs)(f,{disabled:!l,className:ee.gloryPoint,onClick:function(){_()},children:[Object(c.jsx)("img",{src:T("ic_glory_point_spent"),alt:"".concat(t("gloryPointTokens"),' {t("notWasted")}')}),l]})]})]}),Object(c.jsxs)("div",{className:ee.bottom,children:[Object(c.jsx)(p.b,{to:pe.GAME_END.path,className:ee.buttonEndGame,children:Object(c.jsx)(f,{theme:"third",children:t("endGame")})}),Object(c.jsx)(re,{})]})]})},ue=n(8),je=n.n(ue),be=n(25),_e=function(e){var t,n=e.name,a=e.isDead,r=e.icon,i=e.className,s=void 0===i?"":i,o=e.isFocused,d=Object(b.a)(e,["name","isDead","icon","className","isFocused"]);return Object(c.jsx)("div",Object(u.a)(Object(u.a)({className:m(be.root,s,(t={},Object(j.a)(t,be.focused,o),Object(j.a)(t,be.dead,a),t))},d),{},{children:Object(c.jsxs)("div",{className:be.imageContainer,children:[Object(c.jsx)("img",{className:be.imageFighter,src:I(r),alt:n}),Object(c.jsx)("img",{className:be.imageIsDead,src:T("ic_fighter_is_dead"),alt:"Is dead"})]})}))},Oe=n(60),me=n.n(Oe),he=function(e){var t=e.className,n=Object(b.a)(e,["className"]);return Object(c.jsx)("div",Object(u.a)({className:h()(me.a.root,t)},n))},fe=function(){var e,t=Object(x.b)(),n=Object(x.c)((function(e){return e.game})),r=n.rounds,i=n.currentRound,s=(n.currentWarBand,Object(x.c)((function(e){return e.settings})).language),o=Object(a.useState)(0),d=Object(C.a)(o,2),l=d[0],u=d[1],b=Object(a.useState)(!1),_=Object(C.a)(b,2),O=_[0],m=_[1],h=Object(a.useState)(!1),p=Object(C.a)(h,2),v=p[0],E=p[1],g=r[i],N=null===g||void 0===g?void 0:g.activationTokens,A=y(N).length,D=(null===(e=r[i])||void 0===e?void 0:e.cards)||[];Object(a.useEffect)((function(){O&&m(!1)}),[l]);var R,S,P,T,I,k,U,F,M,w=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e)t(B(i,l,{healthPoints:(null===q||void 0===q?void 0:q.healthPoints)+1}));else{var n=q.healthPoints;n&&t(B(i,l,{healthPoints:n-1}))}},W=function(e){if(A){var n;t(B(i,l,Object(j.a)({},e,{applied:!0})));for(var c=N.length-1;c>=0;c--)if(N[c].isActive){n=c;break}n&&t(L(i,n,{isActive:!1}))}},V=function(e){t(B(i,l,Object(j.a)({},e,!1)))},Y=function(){E(!v)},q=D[l];if(q){var X=q.move,Q=q.attack,Z=q.defend,$=q.dodge;R=A&&!Z.applied&&!$.applied&&!Q.applied&&!X.applied,S=A&&!Q.applied&&!X.applied,P=A&&!Q.applied&&!X.applied,T=Z.applied&&$.applied,I=Q.applied,k=X.applied,F=q.name,M=q.description,U=G(O?q.cardInspiredName:q.cardName,s)}var ee=D.map((function(e,t){var n=e.iconName,a=e.name;return Object(c.jsx)(_e,{isDead:!1,name:a,icon:n,isFocused:l===t,onClick:function(){u(t)}},"fighter-".concat(t))}));return Object(c.jsxs)("div",{className:je.a.root,children:[Object(c.jsx)("div",{className:je.a.top,children:Object(c.jsx)("div",{className:je.a.characters,children:ee})}),Object(c.jsx)("div",{className:je.a.middle,children:q?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:je.a.card,children:[Object(c.jsxs)("div",{className:je.a.left,children:[Object(c.jsx)(f,{theme:"secondary",onClick:function(){m(!O)},children:Object(c.jsx)(ae,{size:"tiny",className:je.a.actionButton,srcDefault:O?"ic_condition_inspired_active":"ic_condition_inspired"})}),Object(c.jsx)(f,{theme:"secondary",disabled:!k&&!I,onClick:function(){V(H),V(z)},children:Object(c.jsx)(ae,{size:"tiny",className:je.a.actionButton,srcDefault:k&&I?"ic_condition_out_of_actions_active":"ic_condition_out_of_moves_active",srcDisabled:"ic_condition_out_of_actions",disabled:!k&&!I})}),Object(c.jsx)(f,{theme:"secondary",disabled:!T,onClick:function(){V(J),V(K)},children:Object(c.jsx)(ae,{size:"tiny",className:je.a.actionButton,srcDefault:"ic_condition_on_defensive_active",srcDisabled:"ic_condition_on_defensive",disabled:!T})})]}),Object(c.jsx)("div",{className:je.a.cardContainer,children:Object(c.jsx)("img",{onClick:Y,src:U,alt:F})}),Object(c.jsxs)("div",{className:je.a.right,children:[Object(c.jsx)(f,{onClick:function(){w(!0)},theme:"secondary",children:"+"}),Object(c.jsx)("div",{className:je.a.healthPoints,children:q.healthPoints}),Object(c.jsx)(f,{disabled:!q.healthPoints,onClick:function(){w(!1)},theme:"secondary",children:"-"})]})]}),Object(c.jsxs)("div",{className:je.a.actions,children:[Object(c.jsx)(ae,{className:je.a.actionButton,srcDefault:"ic_action_defense",srcDisabled:"ic_activation_is_forbidden",disabled:!R,onClick:function(){W(J),W(K)}}),Object(c.jsx)(ae,{className:je.a.actionButton,srcDefault:"ic_condition_out_of_actions",srcDisabled:"ic_action_attack_forbidden",disabled:!S,onClick:function(){W(H),W(z)}}),Object(c.jsx)(ae,{className:je.a.actionButton,srcDefault:"ic_moves",srcDisabled:"ic_action_movement",disabled:!P,onClick:function(){W(H)}})]})]}):""}),Object(c.jsx)("div",{className:je.a.bottom,children:Object(c.jsx)(re,{})}),v?Object(c.jsxs)("div",{className:je.a.cardFullScreenContainer,children:[Object(c.jsx)("div",{className:je.a.cardFullScreenTitle,children:F}),Object(c.jsx)("div",{className:je.a.cardFullScreenImageContainer,children:Object(c.jsx)("img",{onClick:Y,src:U,alt:F})}),Object(c.jsx)(he,{children:Object(c.jsx)("p",{className:je.a.cardFullScreenDescription,children:M})})]}):""]})},pe={MAIN:{path:"/"},CHOOSE_SQUAD:{path:"/choose-squad"},GAME_END:{path:"/game-end"},PLAY_FIELD:{path:"/play-field"},CARDS:{path:"/cards"}};var ve=function(){var e=Object(x.b)(),t=Object(v.a)().i18n,n=Object(v.a)("warBands").t,r=Object(v.a)("fighters").t,i=n("items",{returnObjects:!0}),s=r("items",{returnObjects:!0}),o=Object(x.c)((function(e){return e.settings})).language,l=i[Object(x.c)((function(e){return e.game})).currentWarBand],u=l.fighters,j=s.filter((function(e){var t=e.id;return u.includes(t)}));return Object(a.useEffect)((function(){t.changeLanguage(o)}),[o]),Object(a.useEffect)((function(){e(w([0,0,0].map((function(e){return{activationTokens:[{isActive:!0},{isActive:!0},{isActive:!0},{isActive:!0}],cards:j.map((function(e){return{id:e.id,name:e.name,healthPoints:e.healthPoints,iconName:e.iconName,cardInspiredName:e.cardInspiredName,cardName:e.cardName,description:e.description,move:{applied:!1},attack:{applied:!1},defend:{applied:!1},dodge:{applied:!1}}})),gloryPoints:{wasted:{count:0},notWasted:{count:0}}}}))))}),[l]),Object(c.jsx)(p.a,{children:Object(c.jsx)("div",{className:d.a.content,children:Object(c.jsxs)(Q.c,{children:[Object(c.jsx)(Q.a,{path:pe.CARDS.path,render:function(){return Object(c.jsx)(fe,{})}}),Object(c.jsx)(Q.a,{path:pe.CHOOSE_SQUAD.path,render:function(){return Object(c.jsx)(X,{})}}),Object(c.jsx)(Q.a,{path:pe.GAME_END.path,render:function(){return Object(c.jsx)($,{})}}),Object(c.jsx)(Q.a,{path:pe.PLAY_FIELD.path,render:function(){return Object(c.jsx)(le,{})}}),Object(c.jsx)(Q.a,{exact:!0,path:pe.MAIN.path,render:function(){return Object(c.jsx)(N,{})}})]})})})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},Ee=(n(80),n(22)),ge=n(64),Ne=n(26),Ce=n.n(Ne),Ae=n(12),De="GAME/COMMON-DATA",Re=function(){var e=localStorage.getItem(De),t=null;if(e)try{t=JSON.parse(e)}catch(n){}return t},ye=Ce.a.mark(Te),Se=Ce.a.mark(Ie),Pe=Ce.a.mark(ke);function Te(){var e,t,n;return Ce.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Ae.c)((function(e){return e.game.rounds}));case 2:return e=c.sent,c.next=5,Object(Ae.c)((function(e){return e.game.currentWarBand}));case 5:return t=c.sent,c.next=8,Object(Ae.c)((function(e){return e.game.currentRound}));case 8:n=c.sent,a={rounds:e,currentRound:n,currentWarBand:t},localStorage.setItem(De,JSON.stringify(a)),console.log("game saved",{rounds:e,currentRound:n,currentWarBand:t});case 11:case"end":return c.stop()}var a}),ye)}function Ie(){var e;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=Re())){t.next=5;break}return t.next=4,Object(Ae.b)(q(e));case 4:console.log("game loaded",e);case 5:case"end":return t.stop()}}),Se)}function ke(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ae.a)([Object(Ae.d)("GAME-REDUCER/SAVE-GAME",Te),Object(Ae.d)("GAME-REDUCER/LOAD-GAME",Ie),Object(Ae.d)("GAME-REDUCER/SET-rounds",Te),Object(Ae.d)("GAME-REDUCER/UPDATE-ROUND",Te),Object(Ae.d)("GAME-REDUCER/UPDATE-CARD",Te),Object(Ae.d)("GAME-REDUCER/UPDATE-ACTIVATION-TOKEN",Te),Object(Ae.d)("GAME-REDUCER/SET-CURRENT-ROUND",Te),Object(Ae.d)("GAME-REDUCER/SET-CURRENT-WAR-BAND",Te),Object(Ae.d)("GAME-REDUCER/SET-GLORY-POINTS",Te)]);case 2:case"end":return e.stop()}}),Pe)}var Ge=Object(Ee.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=function(e,t,n){return e.map((function(e,c){return c===t&&(e=Object(u.a)(Object(u.a)({},e),n)),e}))};switch(t.type){case"GAME-REDUCER/SET-rounds":return Object(u.a)(Object(u.a)({},e),{},{rounds:Object(F.a)(t.rounds)});case"GAME-REDUCER/SET-CURRENT-ROUND":return Object(u.a)(Object(u.a)({},e),{},{currentRound:t.payload});case"GAME-REDUCER/SET-CURRENT-WAR-BAND":return Object(u.a)(Object(u.a)({},e),{},{currentWarBand:t.payload});case"GAME-REDUCER/UPDATE-ROUND":var c=t.data,a=c.index,r=c.newPropertyValues;return Object(u.a)(Object(u.a)({},e),{},{rounds:Object(F.a)(n(e.rounds,a,r))});case"GAME-REDUCER/UPDATE-CARD":var i=t.data,s=i.roundIndex,o=i.index,d=i.newPropertyValues,l=Object(F.a)(e.rounds);return l[s].cards=Object(F.a)(n(l[s].cards,o,d)),Object(u.a)(Object(u.a)({},e),{},{rounds:l});case"GAME-REDUCER/UPDATE-ACTIVATION-TOKEN":var j=t.data,b=j.roundIndex,_=j.index,O=j.newPropertyValues,m=Object(F.a)(e.rounds);return m[b].activationTokens=Object(F.a)(n(m[b].activationTokens,_,O)),Object(u.a)(Object(u.a)({},e),{},{rounds:m});case"GAME-REDUCER/SET-GLORY-POINTS":var h=t.data,f=h.roundIndex,p=h.newPropertyValues,v=Object(F.a)(e.rounds);return v[f].gloryPoints=Object(u.a)(Object(u.a)({},v[f].gloryPoints),p),Object(u.a)(Object(u.a)({},e),{},{rounds:v});case"GAME-REDUCER/RESET-GAME":return Object(u.a)({},M);case"GAME-REDUCER/LOAD-GAME-SUCCESS":var x,E,g;return Object(u.a)(Object(u.a)({},M),{},{rounds:null===(x=t.data)||void 0===x?void 0:x.rounds,currentWarBand:null===(E=t.data)||void 0===E?void 0:E.currentWarBand,currentRound:null===(g=t.data)||void 0===g?void 0:g.currentRound,isGameCanBeSaved:!0});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS-REDUCER/SET-LANGUAGE":return Object(u.a)(Object(u.a)({},e),{},{language:t.language});default:return e}}}),Ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||Ee.d,Fe=Object(ge.a)(),Me=Object(Ee.e)(Ge,Ue(Object(Ee.a)(Fe)));Fe.run(ke);var we=n(28),Be=n(61),Le=n(62);we.a.use(Le.a).use(Be.a).init({ns:["common","warBands","fighters"],defaultNS:"common",fallbackLng:"ru",debug:!1,keySeparator:!1,interpolation:{escapeValue:!1,formatSeparator:","},detection:{order:["cookie","navigator","path","localStorage","subdomain","queryString","htmlTag"],lookupFromPathIndex:0,caches:["cookie"],cookieMinutes:1e7,lookupQuerystring:"i18next"},backend:{loadPath:P("/locales/{{lng}}/{{ns}}.json")},react:{wait:!1}},(function(e,t){we.a.t("myKey"),we.a.t("common:myKey")}));var We=we.a,Ve=n(83),Ye=function(){return Object(c.jsx)("div",{children:"Loading..."})};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(Ve.a,{i18n:We,children:Object(c.jsx)(a.Suspense,{fallback:Object(c.jsx)(Ye,{}),children:Object(c.jsx)(x.a,{store:Me,children:Object(c.jsx)(ve,{})})})})}),document.getElementById("root")),xe()}},[[82,1,2]]]);
//# sourceMappingURL=main.3c658d5b.chunk.js.map