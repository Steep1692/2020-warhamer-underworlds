(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{16:function(e,t,n){e.exports={root:"PlayField_root__1NBq1",top:"PlayField_top__15tpd",buttonChangeRound:"PlayField_buttonChangeRound__230Fu",round:"PlayField_round__1KHUt",activationTokens:"PlayField_activationTokens__3nNgI",statistics:"PlayField_statistics__3Y9a7",gloryPointsControls:"PlayField_gloryPointsControls__3d-w8",gloryPoints:"PlayField_gloryPoints__1g3p2",gloryPoint:"PlayField_gloryPoint__3anpN",bottom:"PlayField_bottom__39J6I",buttonEndGame:"PlayField_buttonEndGame__1GtlX"}},28:function(e,t,n){e.exports={root:"Menu_root__15shr",title:"Menu_title__1VVIM",items:"Menu_items__3by7Z",item:"Menu_item__1zdMC"}},29:function(e,t,n){e.exports={root:"Button_root__2-QVb",primary:"Button_primary__FZqYg",secondary:"Button_secondary__1_JU8",third:"Button_third__3rmlg",disabled:"Button_disabled__3vE9A"}},30:function(e,t,n){e.exports={root:"ChooseSquad_root__zMTP1",title:"ChooseSquad_title__2vmE6",paper:"ChooseSquad_paper__1YGzK",items:"ChooseSquad_items__5WYYr",bottom:"ChooseSquad_bottom__1ijla"}},31:function(e,t,n){e.exports={root:"GameEnd_root__2h6Qj",title:"GameEnd_title__unVR0",statistics:"GameEnd_statistics__3iA8j",bottom:"GameEnd_bottom__PtfK7",buttonAccept:"GameEnd_buttonAccept__wDaSZ"}},32:function(e,t,n){e.exports={root:"FighterItem_root__3fYUL",focused:"FighterItem_focused__1fytl",imageContainer:"FighterItem_imageContainer__2Ytdc",imageFighter:"FighterItem_imageFighter__w_NNR",iconOnItem:"FighterItem_iconOnItem__19kOW"}},38:function(e,t,n){e.exports={root:"InGameTabs_root__3tNls",button:"InGameTabs_button__1jr08"}},44:function(e,t,n){e.exports={root:"SquadItem_root__1GrLk",focused:"SquadItem_focused__1dRd7",imageContainer:"SquadItem_imageContainer__34L9E",name:"SquadItem_name__3vZRU"}},52:function(e,t,n){e.exports={root:"Icons_root__8nskU",tiny:"Icons_tiny__2YyJc"}},53:function(e,t,n){e.exports={content:"App_content__2cDQP"}},58:function(e,t,n){e.exports={root:"ActivationToken_root__18aDM"}},59:function(e,t,n){e.exports={root:"InnerBorderRadiusWrapper_root__zTUsN"}},60:function(e,t,n){e.exports={root:"Scroll_root__2WouV"}},8:function(e,t,n){e.exports={root:"Cards_root__3RkX3",top:"Cards_top__3kvPN",characters:"Cards_characters__2jjA-",characterName:"Cards_characterName__1fnBW",middle:"Cards_middle__aBXFe",card:"Cards_card__2X5jI",left:"Cards_left__1vuLh",right:"Cards_right__1rR5w",cardContainer:"Cards_cardContainer__35eFG",actions:"Cards_actions__2fDA8",healthPoints:"Cards_healthPoints__3gxwV",bottom:"Cards_bottom__tFEIU",cardFullScreenContainer:"Cards_cardFullScreenContainer__2Fmmf",cardFullScreenImageContainer:"Cards_cardFullScreenImageContainer__2vNYv",cardFullScreenTitle:"Cards_cardFullScreenTitle__3G8FE",cardFullScreenDescription:"Cards_cardFullScreenDescription__1bqgV"}},80:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),i=n(39),s=n.n(i),o=n(53),d=n.n(o),l=n(28),u=n(3),j=n(10),b=n(15),_=n(29),O=n.n(_),m=n(14),h=n.n(m),p=function(e){var t,n=e.className,a=e.theme,r=void 0===a?"primary":a,i=Object(b.a)(e,["className","theme"]);return"primary"===r?t=O.a.primary:"secondary"===r?t=O.a.secondary:"third"===r&&(t=O.a.third),Object(c.jsx)("button",Object(u.a)({className:h()(O.a.root,t,n,Object(j.a)({},O.a.disabled,i.disabled))},i))},E=n(13),f=n(84),v=n(9),x={language:"ru"},g=function(e){return{type:"SETTINGS-REDUCER/SET-LANGUAGE",language:e}},N=function(){var e=Object(f.a)().t,t=Object(v.b)(),n=Object(v.c)((function(e){return e.settings})).language;return Object(c.jsxs)("div",{className:l.root,children:[Object(c.jsx)(p,{theme:"secondary",onClick:function(){t(g("ru"===n?"en":"ru"))},children:n}),Object(c.jsxs)("div",{className:l.items,children:[Object(c.jsx)("div",{className:l.title,children:e("welcome")}),Object(c.jsx)(E.b,{to:ve.CHOOSE_SQUAD.path,className:l.item,children:Object(c.jsx)(p,{children:e("startGame")})}),Object(c.jsx)(E.b,{to:ve.PLAY_FIELD.path,className:l.item,children:Object(c.jsx)(p,{children:e("continue")})})]})]})},C=n(37),A=n(30),R=n.n(A),D=n(44),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return e.isActive}))},S=function(e){return e.filter((function(e){return!!e.healthPoints}))},T=function(e){return"/warhamer-underworlds"+e},G=function(e){return T("/images/icons/".concat(e,".png"))},P=function(e){return T("/images/fighters/".concat(e,".png"))},I=function(e){return T("/images/war-bands/".concat(e,".png"))},U=function(e,t){return T("/images/cards/".concat(t,"/").concat(e,".jpg"))},k=function(e){var t=e.name,n=e.color,a=e.icon,r=e.className,i=void 0===r?"":r,s=e.isFocused,o=Object(b.a)(e,["name","color","icon","className","isFocused"]);return Object(c.jsx)("div",Object(u.a)(Object(u.a)({className:m(D.root,i,Object(j.a)({},D.focused,s))},o),{},{children:Object(c.jsx)("div",{style:{backgroundColor:n},className:D.imageContainer,children:Object(c.jsx)("img",{src:I(a),alt:t})})}))},M=n(25),F={currentRound:0,currentWarBand:0,warBand:{fighters:[]},rounds:[{activationTokens:[{isActive:!0},{isActive:!0},{isActive:!0},{isActive:!0}],gloryPoints:{wasted:{count:0},notWasted:{count:0}}},{activationTokens:[{isActive:!0},{isActive:!0},{isActive:!0},{isActive:!0}],gloryPoints:{wasted:{count:0},notWasted:{count:0}}},{activationTokens:[{isActive:!0},{isActive:!0},{isActive:!0},{isActive:!0}],gloryPoints:{wasted:{count:0},notWasted:{count:0}}}],isGameCanBeSaved:!1},w=function(e,t,n){return{type:"GAME-REDUCER/UPDATE-CARD",data:{roundIndex:e,index:t,newPropertyValues:n}}},B=function(e,t,n){return{type:"GAME-REDUCER/UPDATE-ACTIVATION-TOKEN",data:{roundIndex:e,index:t,newPropertyValues:n}}},L=function(e){return{type:"GAME-REDUCER/SET-CURRENT-ROUND-SUCCESS",payload:e}},V=function(e){return{type:"GAME-REDUCER/SET-FIGHTERS",payload:e}},W=function(e){return{type:"GAME-REDUCER/SET-CURRENT-WAR-BAND",payload:e}},Y=function(e,t){return{type:"GAME-REDUCER/SET-GLORY-POINTS",data:{roundIndex:e,newPropertyValues:t}}},q=function(){return{type:"GAME-REDUCER/RESET-GAME"}},H=function(e){return{type:"GAME-REDUCER/LOAD-GAME-SUCCESS",data:e}},K=function(){return{type:"GAME-REDUCER/RESET-FIGHTERS-SKILLS"}},z=function(e){return{type:"GAME-REDUCER/CHANGE-ROUND",payload:e}},X={MOVE:"move",ATTACK:"attack",DEFEND:"defend",DODGE:"dodge"},J=function(){var e=Object(v.b)(),t=Object(f.a)().t,n=Object(f.a)("warBands").t,r=Object(a.useState)(0),i=Object(C.a)(r,2),s=i[0],o=i[1],d=n("items",{returnObjects:!0});Object(a.useEffect)((function(){e(q())}),[]),Object(a.useEffect)((function(){e(W(s))}),[s]);var l=d.map((function(e,t){var n=e.name,a=e.icon,r=e.color;return Object(c.jsx)(k,{name:n,icon:a,color:r,isFocused:s===t,onClick:function(){o(t)}},"war-band-".concat(t))}));return Object(c.jsxs)("div",{className:R.a.root,children:[Object(c.jsx)("div",{className:R.a.title,children:t("chooseSquad")}),Object(c.jsxs)("div",{className:R.a.paper,children:[Object(c.jsx)("div",{className:R.a.items,children:l}),Object(c.jsx)("div",{className:R.a.bottom,children:Object(c.jsx)(E.b,{to:ve.PLAY_FIELD.path,children:Object(c.jsx)(p,{children:t("acceptChoose")})})})]})]})},Q=n(7),Z=n(31),$=function(){var e=Object(f.a)().t,t=Object(v.c)((function(e){return e.game})).rounds,n=t.reduce((function(e,t){return e+function(e){return e.length-S(e).length}(t.cards)}),0),a=t.reduce((function(e,t){return e+t.gloryPoints.wasted.count}),0),r=t.reduce((function(e,t){return e+t.gloryPoints.notWasted.count}),0);return Object(c.jsxs)("div",{className:Z.root,children:[Object(c.jsx)("div",{className:Z.title,children:e("gameEnd")}),Object(c.jsx)("div",{className:Z.statistics,children:Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("gloryPointTokens")}),Object(c.jsx)("td",{children:r})]})}),Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("notWasted")}),Object(c.jsx)("td",{children:r})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("wasted")}),Object(c.jsx)("td",{children:a})]})]}),Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("fightersInTheSquad")}),Object(c.jsx)("td",{children:r})]})}),Object(c.jsx)("tbody",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e("casualties")}),Object(c.jsx)("td",{children:n})]})})]})}),Object(c.jsx)("div",{className:Z.bottom,children:Object(c.jsx)(E.b,{to:ve.MAIN.path,children:Object(c.jsx)(p,{className:Z.buttonAccept,children:e("accept")})})})]})},ee=n(16),te=n.n(ee),ne=n(38),ce=n(52),ae=n.n(ce),re=function(e){var t=e.size,n=e.srcDisabled,a=e.srcHover,r=e.srcDefault,i=e.className,s=Object(b.a)(e,["size","srcDisabled","srcHover","srcDefault","className"]),o="";return"tiny"===t&&(o=ae.a.tiny),Object(c.jsx)("button",Object(u.a)({className:h()(ae.a.root,i,o),style:{"--src-disabled":'url("'.concat(G(n||r),'")'),"--src-hover":'url("'.concat(G(a||r),'")'),"--src-default":'url("'.concat(G(r),'")')}},s))},ie=function(){var e=Object(Q.f)().pathname;return Object(c.jsxs)("div",{className:ne.root,children:[Object(c.jsx)(E.c,{to:ve.CARDS.path,children:Object(c.jsx)(re,{className:ne.button,srcDefault:"ic_menu_selected_hero",srcHover:"ic_menu_selected_hero_active",srcDisabled:"ic_menu_selected_hero_active",disabled:e===ve.CARDS.path})}),Object(c.jsx)(E.c,{to:ve.PLAY_FIELD.path,children:Object(c.jsx)(re,{className:ne.button,srcDefault:"ic_menu_game_score",srcHover:"ic_menu_game_score_active",srcDisabled:"ic_menu_game_score_active",disabled:e===ve.PLAY_FIELD.path})}),Object(c.jsx)(E.c,{exact:!0,to:ve.MAIN.path,children:Object(c.jsx)(re,{className:ne.button,srcDefault:"ic_menu_save_and_exit",disabled:e===ve.MAIN.path})})]})},se=n(58),oe=function(e){var t,n,a=e.className,r=void 0===a?"":a,i=e.isActive,s=void 0!==i&&i,o=Object(b.a)(e,["className","isActive"]);return s?(t=G("ic_activation_token"),n="Activation token active"):(t=G("ic_activation_token_spent"),n="Activation token spent"),Object(c.jsx)("div",Object(u.a)(Object(u.a)({className:m(se.root,r)},o),{},{children:Object(c.jsx)("img",{src:t,alt:n})}))},de=n(59),le=function(e){var t=e.className,n=e.children,a=Object(b.a)(e,["className","children"]);return Object(c.jsx)("div",Object(u.a)(Object(u.a)({className:m(de.root,t)},a),{},{children:n}))},ue=function(){var e=Object(v.b)(),t=Object(f.a)().t,n=Object(v.c)((function(e){return e.game})),a=n.rounds,r=n.currentRound,i=a[r],s=a.length,o=null===i||void 0===i?void 0:i.activationTokens,d=r<s-1,l=r>0,u=a.reduce((function(e,t){return e+t.gloryPoints.wasted.count}),0),j=a.reduce((function(e,t){return e+t.gloryPoints.notWasted.count}),0),b=function(){e(Y(r,{notWasted:{count:j+1}}))},_=function(){e(Y(r,{notWasted:{count:j-1}}))};console.log("%c CONSOLE LOG!!!","background: black; color: red;"),console.log({currentRound:r});var O=function(){u&&(e(Y(r,{wasted:{count:u-1}})),b())},m=function(){j&&(_(),e(Y(r,{wasted:{count:u+1}})))},h=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?b():_()},x=function(t){t?d&&e(z(r+1)):l&&e(z(r-1))},g=null===o||void 0===o?void 0:o.map((function(t,n){var a=t.isActive;return Object(c.jsx)(oe,{onClick:function(){e(B(r,n,{isActive:!a}))},isActive:a},n)}));return Object(c.jsxs)("div",{className:te.a.root,children:[Object(c.jsxs)("div",{className:te.a.top,children:[Object(c.jsx)(re,{className:te.a.buttonChangeRound,srcDefault:"ic_previous_round",srcHover:"ic_previous_round_pressed",srcDisabled:"ic_previous_round_inactive",disabled:!l,onClick:function(){return x(!1)}}),Object(c.jsx)(le,{className:te.a.round,children:Object(c.jsxs)("span",{children:[t("round")," ",r+1]})}),Object(c.jsx)(re,{className:te.a.buttonChangeRound,srcDefault:"ic_next_round",srcHover:"ic_next_round_pressed",srcDisabled:"ic_next_round_inactive",disabled:!d,onClick:function(){return x(!0)}})]}),Object(c.jsx)("div",{className:te.a.activationTokens,children:g}),Object(c.jsxs)("div",{className:te.a.statistics,children:[Object(c.jsxs)("div",{className:te.a.gloryPointsControls,children:[Object(c.jsx)(p,{theme:"secondary",onClick:function(){h(!0)},children:"+"}),Object(c.jsx)(p,{theme:"secondary",disabled:!j,onClick:function(){h(!1)},children:"-"})]}),Object(c.jsxs)("div",{className:te.a.gloryPoints,children:[Object(c.jsxs)(p,{disabled:!j,className:te.a.gloryPoint,onClick:function(){m()},children:[Object(c.jsx)("img",{src:G("ic_glory_point"),alt:"".concat(t("gloryPointTokens"),' {t("wasted")}')}),j]}),Object(c.jsxs)(p,{disabled:!u,className:te.a.gloryPoint,onClick:function(){O()},children:[Object(c.jsx)("img",{src:G("ic_glory_point_spent"),alt:"".concat(t("gloryPointTokens"),' {t("notWasted")}')}),u]})]})]}),Object(c.jsxs)("div",{className:te.a.bottom,children:[Object(c.jsx)(E.b,{to:ve.GAME_END.path,className:te.a.buttonEndGame,children:Object(c.jsx)(p,{theme:"third",children:t("endGame")})}),Object(c.jsx)(ie,{})]})]})},je=n(8),be=n.n(je),_e=n(32),Oe=n.n(_e),me=function(e){var t,n=e.item,a=e.className,r=void 0===a?"":a,i=e.isFocused,s=Object(b.a)(e,["item","className","isFocused"]),o=n.iconName,d=n.name,l=n.healthPoints,_=n.attack,O=n.defend,m=n.dodge,p=n.move;return 0===l?t="ic_fighter_is_dead":_.applied&&p.applied?t="ic_condition_out_of_actions":p.applied&&!_.applied?t="ic_moves":(O.applied||m.applied)&&(t="ic_action_defense"),Object(c.jsx)("div",Object(u.a)(Object(u.a)({className:h()(Oe.a.root,r,Object(j.a)({},Oe.a.focused,i))},s),{},{children:Object(c.jsxs)("div",{className:Oe.a.imageContainer,children:[Object(c.jsx)("img",{className:Oe.a.imageFighter,src:P(o),alt:d}),t&&Object(c.jsx)("img",{className:Oe.a.iconOnItem,src:G(t)})]})}))},he=n(60),pe=n.n(he),Ee=function(e){var t=e.className,n=Object(b.a)(e,["className"]);return Object(c.jsx)("div",Object(u.a)({className:h()(pe.a.root,t)},n))},fe=function(){var e,t,n,r,i,s,o,d,l=Object(v.b)(),u=Object(v.c)((function(e){return e.game})),b=u.rounds,_=u.currentRound,O=u.warBand,m=Object(v.c)((function(e){return e.settings})).language,h=Object(a.useState)(0),E=Object(C.a)(h,2),f=E[0],x=E[1],g=Object(a.useState)(!1),N=Object(C.a)(g,2),A=N[0],R=N[1],D=b[_],S=null===D||void 0===D?void 0:D.activationTokens,T=y(S).length,G=O.fighters,P=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=F.healthPoints;e?l(w(_,f,{healthPoints:t+1})):t&&l(w(_,f,{healthPoints:t-1}))},I=function(e){if(T){for(var t=-1,n=S.length-1;n>=0;n--)if(S[n].isActive){t=n;break}-1!==t&&(l(B(_,t,{isActive:!1})),l(w(_,f,Object(j.a)({},e,{applied:!0}))))}},k=function(e){l(w(_,f,Object(j.a)({},e,!1)))},M=function(){R(!A)},F=G[f],L="",V="",W=!1;if(F){var Y=F.move,q=F.attack,H=F.defend,K=F.dodge;e=T&&!H.applied&&!K.applied&&!q.applied&&!Y.applied,t=T&&!q.applied&&!Y.applied,n=T&&!q.applied&&!Y.applied,r=H.applied&&K.applied,i=q.applied,s=Y.applied,o="none"!==F.cardInspiredName,L=F.name,V=F.description,W=F.isInspired,d=U(W?F.cardInspiredName:F.cardName,m)}var z=G.map((function(e,t){return Object(c.jsx)(me,{item:e,isFocused:f===t,onClick:function(){x(t)}},"fighter-".concat(t))}));return Object(c.jsxs)("div",{className:be.a.root,children:[Object(c.jsx)("div",{className:be.a.top,children:Object(c.jsx)("div",{className:be.a.characters,children:z})}),Object(c.jsx)("div",{className:be.a.middle,children:F?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:be.a.card,children:[Object(c.jsxs)("div",{className:be.a.left,children:[Object(c.jsx)(p,{theme:"secondary",disabled:!o,onClick:function(){l(w(_,f,{isInspired:!W}))},children:Object(c.jsx)(re,{size:"tiny",className:be.a.actionButton,disabled:!o,srcDisabled:"ic_condition_inspired_inactive",srcDefault:W?"ic_condition_inspired_active":"ic_condition_inspired"})}),Object(c.jsx)(p,{theme:"secondary",disabled:!s&&!i,onClick:function(){k(X.MOVE),k(X.ATTACK)},children:Object(c.jsx)(re,{size:"tiny",className:be.a.actionButton,srcDefault:s&&i?"ic_condition_out_of_actions_active":"ic_condition_out_of_moves_active",srcDisabled:"ic_condition_out_of_actions",disabled:!s&&!i})}),Object(c.jsx)(p,{theme:"secondary",disabled:!r,onClick:function(){k(X.DEFEND),k(X.DODGE)},children:Object(c.jsx)(re,{size:"tiny",className:be.a.actionButton,srcDefault:"ic_condition_on_defensive_active",srcDisabled:"ic_condition_on_defensive",disabled:!r})})]}),Object(c.jsx)("div",{className:be.a.cardContainer,children:Object(c.jsx)("img",{onClick:M,src:d,alt:L})}),Object(c.jsxs)("div",{className:be.a.right,children:[Object(c.jsx)(p,{onClick:function(){P(!0)},theme:"secondary",children:"+"}),Object(c.jsx)("div",{className:be.a.healthPoints,children:F.healthPoints}),Object(c.jsx)(p,{disabled:!F.healthPoints,onClick:function(){P(!1)},theme:"secondary",children:"-"})]})]}),Object(c.jsxs)("div",{className:be.a.actions,children:[Object(c.jsx)(re,{className:be.a.actionButton,srcDefault:"ic_action_defense",srcDisabled:"ic_activation_is_forbidden",disabled:!e,onClick:function(){I(X.DEFEND),I(X.DODGE)}}),Object(c.jsx)(re,{className:be.a.actionButton,srcDefault:"ic_condition_out_of_actions",srcDisabled:"ic_action_attack_forbidden",disabled:!t,onClick:function(){I(X.MOVE),I(X.ATTACK)}}),Object(c.jsx)(re,{className:be.a.actionButton,srcDefault:"ic_moves",srcDisabled:"ic_action_movement",disabled:!n,onClick:function(){I(X.MOVE)}})]})]}):""}),Object(c.jsx)("div",{className:be.a.bottom,children:Object(c.jsx)(ie,{})}),A?Object(c.jsxs)("div",{className:be.a.cardFullScreenContainer,children:[Object(c.jsx)("div",{className:be.a.cardFullScreenTitle,children:L}),Object(c.jsx)("div",{className:be.a.cardFullScreenImageContainer,children:Object(c.jsx)("img",{onClick:M,src:d,alt:L})}),Object(c.jsx)(Ee,{children:Object(c.jsx)("p",{className:be.a.cardFullScreenDescription,children:V})})]}):""]})},ve={MAIN:{path:"/"},CHOOSE_SQUAD:{path:"/choose-squad"},GAME_END:{path:"/game-end"},PLAY_FIELD:{path:"/play-field"},CARDS:{path:"/cards"}};var xe=function(){var e=Object(v.b)(),t=Object(f.a)().i18n,n=Object(f.a)("warBands").t,r=Object(f.a)("fighters").t,i=n("items",{returnObjects:!0}),s=r("items",{returnObjects:!0}),o=Object(v.c)((function(e){return e.settings})).language,l=i[Object(v.c)((function(e){return e.game})).currentWarBand],u=l.fighters,j=s.filter((function(e){var t=e.id;return u.includes(t)}));return Object(a.useEffect)((function(){e(V(j.map((function(e){return{id:e.id,name:e.name,healthPoints:e.healthPoints,iconName:e.iconName,cardInspiredName:e.cardInspiredName,cardName:e.cardName,description:e.description,isInspired:!1,move:{applied:!1},attack:{applied:!1},defend:{applied:!1},dodge:{applied:!1}}}))))}),[l]),Object(a.useEffect)((function(){t.changeLanguage(o)}),[o]),Object(c.jsx)(E.a,{children:Object(c.jsx)("div",{className:d.a.content,children:Object(c.jsxs)(Q.c,{children:[Object(c.jsx)(Q.a,{path:ve.CARDS.path,render:function(){return Object(c.jsx)(fe,{})}}),Object(c.jsx)(Q.a,{path:ve.CHOOSE_SQUAD.path,render:function(){return Object(c.jsx)(J,{})}}),Object(c.jsx)(Q.a,{path:ve.GAME_END.path,render:function(){return Object(c.jsx)($,{})}}),Object(c.jsx)(Q.a,{path:ve.PLAY_FIELD.path,render:function(){return Object(c.jsx)(ue,{})}}),Object(c.jsx)(Q.a,{exact:!0,path:ve.MAIN.path,render:function(){return Object(c.jsx)(N,{})}})]})})})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},Ne=(n(80),n(22)),Ce=n(64),Ae=n(23),Re=n.n(Ae),De=n(12),ye="GAME/COMMON-DATA",Se=function(){var e=localStorage.getItem(ye),t=null;if(e)try{t=JSON.parse(e)}catch(n){}return t},Te=Re.a.mark(Ue),Ge=Re.a.mark(ke),Pe=Re.a.mark(Me),Ie=Re.a.mark(Fe);function Ue(){var e,t,n,c,a;return Re.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(De.c)((function(e){return e.game}));case 2:e=r.sent,t=e.rounds,n=e.currentWarBand,c=e.currentRound,a=e.warBand,i={rounds:t,currentRound:c,currentWarBand:n,warBand:a},localStorage.setItem(ye,JSON.stringify(i)),console.log("game saved",{rounds:t,currentRound:c,currentWarBand:n});case 9:case"end":return r.stop()}var i}),Te)}function ke(){var e;return Re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=Se())){t.next=5;break}return t.next=4,Object(De.b)(H(e));case 4:console.log("game loaded",e);case 5:case"end":return t.stop()}}),Ge)}function Me(e){var t;return Re.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Object(De.b)(L(t));case 3:return n.next=5,Object(De.b)(K());case 5:case"end":return n.stop()}}),Pe)}function Fe(){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(De.a)([Object(De.d)("GAME-REDUCER/SAVE-GAME",Ue),Object(De.d)("GAME-REDUCER/LOAD-GAME",ke),Object(De.d)("GAME-REDUCER/SET-rounds",Ue),Object(De.d)("GAME-REDUCER/UPDATE-ROUND",Ue),Object(De.d)("GAME-REDUCER/UPDATE-CARD",Ue),Object(De.d)("GAME-REDUCER/UPDATE-ACTIVATION-TOKEN",Ue),Object(De.d)("GAME-REDUCER/SET-CURRENT-ROUND",Ue),Object(De.d)("GAME-REDUCER/SET-CURRENT-WAR-BAND",Ue),Object(De.d)("GAME-REDUCER/SET-GLORY-POINTS",Ue),Object(De.d)("GAME-REDUCER/CHANGE-ROUND",Me)]);case 2:case"end":return e.stop()}}),Ie)}var we=Object(Ne.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0,n=function(e,t,n){return e.map((function(e,c){return c===t&&(e=Object(u.a)(Object(u.a)({},e),n)),e}))};switch(t.type){case"GAME-REDUCER/SET-rounds":return Object(u.a)(Object(u.a)({},e),{},{rounds:Object(M.a)(t.rounds)});case"GAME-REDUCER/SET-CURRENT-ROUND-SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{currentRound:t.payload});case"GAME-REDUCER/SET-FIGHTERS":return Object(u.a)(Object(u.a)({},e),{},{warBand:Object(u.a)(Object(u.a)({},e.warBand),{},{fighters:t.payload})});case"GAME-REDUCER/SET-CURRENT-WAR-BAND":return Object(u.a)(Object(u.a)({},e),{},{currentWarBand:t.payload});case"GAME-REDUCER/UPDATE-ROUND":var c=t.data,a=c.index,r=c.newPropertyValues;return Object(u.a)(Object(u.a)({},e),{},{rounds:Object(M.a)(n(e.rounds,a,r))});case"GAME-REDUCER/UPDATE-CARD":var i=t.data,s=i.index,o=i.newPropertyValues;return Object(u.a)(Object(u.a)({},e),{},{warBand:Object(u.a)(Object(u.a)({},e.warBand),{},{fighters:Object(M.a)(n(e.warBand.fighters,s,o))})});case"GAME-REDUCER/UPDATE-ACTIVATION-TOKEN":var d=t.data,l=d.roundIndex,b=d.index,_=d.newPropertyValues,O=Object(M.a)(e.rounds);return O[l].activationTokens=Object(M.a)(n(O[l].activationTokens,b,_)),Object(u.a)(Object(u.a)({},e),{},{rounds:O});case"GAME-REDUCER/SET-GLORY-POINTS":var m=t.data,h=m.roundIndex,p=m.newPropertyValues,E=Object(M.a)(e.rounds);return E[h].gloryPoints=Object(u.a)(Object(u.a)({},E[h].gloryPoints),p),Object(u.a)(Object(u.a)({},e),{},{rounds:E});case"GAME-REDUCER/RESET-GAME":return Object(u.a)({},F);case"GAME-REDUCER/LOAD-GAME-SUCCESS":var f,v,x;return Object(u.a)(Object(u.a)({},F),{},{rounds:null===(f=t.data)||void 0===f?void 0:f.rounds,warBand:null===(v=t.data)||void 0===v?void 0:v.warBand,currentRound:null===(x=t.data)||void 0===x?void 0:x.currentRound,isGameCanBeSaved:!0});case"GAME-REDUCER/RESET-FIGHTERS-SKILLS":return Object(u.a)(Object(u.a)({},e),{},{warBand:Object(u.a)(Object(u.a)({},e.warBand),{},{fighters:e.warBand.fighters.map((function(e){var t;return Object(u.a)(Object(u.a)({},e),{},(t={},Object(j.a)(t,X.MOVE,{applied:!1}),Object(j.a)(t,X.ATTACK,{applied:!1}),Object(j.a)(t,X.DEFEND,{applied:!1}),Object(j.a)(t,X.DODGE,{applied:!1}),t))}))})});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTINGS-REDUCER/SET-LANGUAGE":return Object(u.a)(Object(u.a)({},e),{},{language:t.language});default:return e}}}),Be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||Ne.d,Le=Object(Ce.a)(),Ve=Object(Ne.e)(we,Be(Object(Ne.a)(Le)));Le.run(Fe);var We=n(27),Ye=n(61),qe=n(62);We.a.use(qe.a).use(Ye.a).init({ns:["common","warBands","fighters"],defaultNS:"common",fallbackLng:"ru",debug:!1,keySeparator:!1,interpolation:{escapeValue:!1,formatSeparator:","},detection:{order:["cookie","navigator","path","localStorage","subdomain","queryString","htmlTag"],lookupFromPathIndex:0,caches:["cookie"],cookieMinutes:1e7,lookupQuerystring:"i18next"},backend:{loadPath:T("/locales/{{lng}}/{{ns}}.json")},react:{wait:!1}},(function(e,t){We.a.t("myKey"),We.a.t("common:myKey")}));var He=We.a,Ke=n(83),ze=function(){return Object(c.jsx)("div",{children:"Loading..."})};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(Ke.a,{i18n:He,children:Object(c.jsx)(a.Suspense,{fallback:Object(c.jsx)(ze,{}),children:Object(c.jsx)(v.a,{store:Ve,children:Object(c.jsx)(xe,{})})})})}),document.getElementById("root")),ge()}},[[82,1,2]]]);
//# sourceMappingURL=main.8e166af9.chunk.js.map